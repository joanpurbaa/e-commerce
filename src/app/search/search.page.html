<ion-content>
  <main>
    <div class="searchBar">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-search-icon lucide-search">
          <path d="m21 21-4.34-4.34" />
          <circle cx="11" cy="11" r="8" />
        </svg>
        <input type="text" placeholder="Search for clothes" [(ngModel)]="searchQuery" (keyup.enter)="searchProducts()">
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-mic-icon lucide-mic">
        <path d="M12 19v3" />
        <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
        <rect x="9" y="2" width="6" height="13" rx="3" />
      </svg>
    </div>
    <div *ngIf="!searchQuery" class="recentWrapper">
      <div class="labelWrapper" *ngIf="history.length > 0">
        <h2 class="label"><b>Recent Searches</b></h2>
        <p (click)="clearHistory()"><u>Clear all</u></p>
      </div>
      <ul class="historyWrapper">
        <li *ngFor="let h of history">
          <p (click)="searchQuery=h; searchProducts()">{{ h }}</p>
          <svg (click)="removeHistoryItem(h)" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" class="lucide lucide-circle-x-icon lucide-circle-x">
            <circle cx="12" cy="12" r="10" />
            <path d="m15 9-6 6" />
            <path d="m9 9 6 6" />
          </svg>
        </li>
      </ul>
    </div>
    <section class="products" *ngIf="searchQuery && products.length > 0">
      <div class="productWrapper" *ngFor="let product of products" (click)="goToDetails(product.id)">
        <div class="product" [ngStyle]="{'background-image': 'url(' + product.thumbnail + ')'}"></div>
        <div class="productInformation">
          <p>{{ product.title }}</p>
          <p>
            ${{ product.price }}
            <span *ngIf="product.discountPercentage">-{{ product.discountPercentage }}%</span>
          </p>
        </div>
      </div>
    </section>
  </main>
</ion-content>