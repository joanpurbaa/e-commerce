<ion-content [fullscreen]="true">
  <main>
    <header>
      <h1 class="title">Discover</h1>
      <ion-icon class="headerIcon" name="notifications-outline" (click)="goToNotification()">
      </ion-icon>
    </header>
    <section class="searchWrapper">
      <div (click)="goToSearch()" class="searchBar">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-search-icon lucide-search">
            <path d="m21 21-4.34-4.34" />
            <circle cx="11" cy="11" r="8" />
          </svg>
          <input type="text" placeholder="Search for clothes">
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-mic-icon lucide-mic">
          <path d="M12 19v3" />
          <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
          <rect x="9" y="2" width="6" height="13" rx="3" />
        </svg>
      </div>
      <ion-button class="filter" id="open-modal" expand="block">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="lucide lucide-sliders-horizontal-icon lucide-sliders-horizontal">
          <line x1="21" x2="14" y1="4" y2="4" />
          <line x1="10" x2="3" y1="4" y2="4" />
          <line x1="21" x2="12" y1="12" y2="12" />
          <line x1="8" x2="3" y1="12" y2="12" />
          <line x1="21" x2="16" y1="20" y2="20" />
          <line x1="12" x2="3" y1="20" y2="20" />
          <line x1="14" x2="14" y1="2" y2="6" />
          <line x1="8" x2="8" y1="10" y2="14" />
          <line x1="16" x2="16" y1="18" y2="22" />
        </svg>
      </ion-button>
    </section>
    <section class="categories">
      <p>All</p>
      <p>Tshirt</p>
      <p>Jeans</p>
      <p>Shoes</p>
      <p>Cap</p>
      <p>Tie</p>
    </section>
    <section class="products">
      <div class="productWrapper" *ngFor="let product of products" (click)="goToDetails(product.id)">
        <div class="product" [ngStyle]="{'background-image': 'url(' + product.thumbnail + ')'}">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="lucide lucide-heart-icon lucide-heart">
            <path
              d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5" />
          </svg>
        </div>
        <div class="productInformation">
          <p>{{ product.title }}</p>
          <p>
            ${{ product.price }}
            <span *ngIf="product.discountPercentage">-{{ product.discountPercentage }}%</span>
          </p>
        </div>
      </div>
    </section>
  </main>

  <ion-modal #modal trigger="open-modal" [presentingElement]="presentingElement" [canDismiss]="true">
    <ng-template>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Filters</h2>
          <ion-button (click)="modal.dismiss()" fill="clear" class="close-btn">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
        </div>

        <div class="modal-body">
          <div class="filter-section">
            <h3>Sort By</h3>
            <div class="sort-options">
              <div class="sort-chip selected">Relevance</div>
              <div class="sort-chip">Price: Low - High</div>
              <div class="sort-chip">Price: High - Low</div>
            </div>
          </div>

          <div class="filter-section">
            <div class="price-header">
              <h3>Price</h3>
              <span class="price-range">$0 - $1000</span>
            </div>
            <ion-range dual-knobs="true" min="0" max="2000" value="{ lower: 0, upper: 1000 }" pin="true"
              color="primary">
            </ion-range>
          </div>

          <div class="filter-section">
            <h3>Size</h3>
            <div class="size-options">
              <div class="size-chip">XS</div>
              <div class="size-chip">S</div>
              <div class="size-chip">M</div>
              <div class="size-chip selected">L</div>
              <div class="size-chip">XL</div>
              <div class="size-chip">XXL</div>
            </div>
          </div>

          <button class="apply-button">Apply Filter</button>
        </div>
      </div>
    </ng-template>
  </ion-modal>
</ion-content>